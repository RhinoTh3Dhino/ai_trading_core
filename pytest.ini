[pytest]
minversion = 8.0

# Hvor pytest leder efter tests
testpaths = tests

# Hvilke filer/klasser/funktioner tælles som tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Ignorer støjende mapper (venv, git, cache, artefakter)
norecursedirs =
    .git
    .venv
    .venv_tf_gpu
    .pytest_cache
    htmlcov
    notebooks
    outputs
    logs
    backups
    mlruns

# Standard-flags (så du kan nøjes med 'pytest')
addopts =
    # ignorer filer/mappers som ikke er tests
    --ignore=test.txt
    --ignore=README.md
    --ignore=outputs
    --ignore=data
    --ignore=notebooks
    # kvalitet/robusthed
    -vv
    --maxfail=1
    --disable-warnings
    --timeout=20
    # coverage (kerne-moduler)
    --cov=backtest.backtest
    --cov=backtest.metrics
    --cov=ensemble.ensemble_predict
    --cov=utils.telegram_utils
    --cov-report=term-missing
    --cov-report=html
    --cov-fail-under=80

# Undertryk specifikke, kendte advarsler
filterwarnings =
    ignore:.*'H' is deprecated and will be removed in a future version.*:FutureWarning

# CLI logging (nyttigt når tests fejler på CI)
log_cli = true
log_cli_level = INFO
